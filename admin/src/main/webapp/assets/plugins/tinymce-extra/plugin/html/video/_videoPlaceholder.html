<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        html body {
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        #image {
            width: 100%;
            height: 0;
            padding-top: 56.25%;
            background-size: cover;
            position: relative;
        }

        #previewBtn {
            position: absolute;
            left: 10px;
            bottom: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABSUlEQVQ4T63UO0seURSF4ccUFgYRLESjILaKVhaSP2BllcYixsrCSq28VCpoYaEELARJGkGM2FpGbcRLJQh2ov9ALFQIAWXDGZiIl/m+ye6Gc9bLPrPXXjX+rRp8xgn+Pjsr9BmArDqwjV6c4RvOC1Fyl/LAJbRjBNMYxzLm8KcoOA/cwmmChL4TG6hP3R4XgeaB8dwQRVdZfcAoFhN8Endvgd8DZtpP+I6+1O3+a9CiwEzfj3UcYAw3z8GVAkNfh1l8xQR+5aHVADN9NrRrDOE+DsoAQx9D28UR5v8nMNwRfi3VYTd+4grDeKgW+DF1M5i2aafSocSOt+Ei+XANv5NtbiuxTW2yxSM2sVLG2D0YwA98wUJavalKVi8MGjkYu9yI1vTTG6oNh1W0pInNpOeWiq8u7KEJhyllSgVsDCws0YzLItn30p0n2dlTFedWndoAAAAASUVORK5CYII=");
            background-size: 20px;
            background-position: 11px 10px;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
<div id="image" draggable="false">
    <a id="previewBtn" href="javascript:void(0)" onclick="play()"></a>
</div>
<script type="text/javascript" src="../../vendor/base64/base64.min.js"></script>
<script type="text/javascript">
    var params = JSON.parse(Base64.decode(window.location.hash.substring(1)));
    var editor = top.tinymce.activeEditor;
    var snapshot = '?x-oss-process=video/snapshot,t_1,f_jpg,w_0,h_0,m_fast';
    document.querySelector('#image').setAttribute('style', 'background-image:url(\'' + params.source + snapshot + '\')');

    function play() {
        editor.windowManager.open({
            title: 'Preview',
            width: 640,
            height: 360,
            html: '<video style="width: 640px;height: 360px" src="' + params.source + '" controlslist="nodownload" poster="' + params.source + snapshot + '" controls="controls">' +
            '您的浏览器不支持 video 标签' +
            '</video>',
            buttons: []
        });
    }
</script>
</body>
</html>